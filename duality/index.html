<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Duality</title>

<style>
  /* Top bar container */
  .top-bar {
    width: 100%;
    height: 60px; /* adjust height as needed */
    background-color: #333; /* dark background */
    display: flex;
    align-items: center;
    padding: 0 20px; /* horizontal padding */
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    position: fixed; /* stays at the top */
    top: 0;
    left: 0;
    z-index: 1000;
  }

  /* Logo image */
  .top-bar img {
    height: 40px; /* logo height */
    cursor: pointer;
    transition: transform 0.2s;
  }

  .top-bar img:hover {
    transform: scale(1.1); /* subtle hover effect */
  }

  /* Optional: content next to logo */
  .top-bar .title {
    color: white;
    font-size: 20px;
    font-weight: bold;
    margin-left: 15px;
  }

  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #f4f4f9;
    margin: 0;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    position: relative;
  }

  h2 {
    margin-bottom: 16px;
    color: #333;
    position: absolute;
    top: 20px;
    width: 100%;
    text-align: center;
  }

  #container {
  position: absolute;
  top: 100;
  width: 100%;
  height: 100%;
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  grid-template-rows: repeat(4, 1fr);
  gap: 10px;
}

#bob {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 10;
  width: 400px; /* or desired size */
  height: auto;
  border-radius: 12px;
  transition: opacity 0.2s;
}

#imageList {
  display: contents; /* allows children to occupy grid cells */
}

#imageList button {
  width: 100%;
  height: 100%;
  flex: unset;
}

  #imageList button:hover {
    transform: scale(1.05);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
    z-index: 2;
  }

  #imageList img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 12px;
    display: block;
    transition: opacity 0.2s;
  }

  #imageList img:hover {
    opacity: 0.95;
  }

  #imageList button::after {
    content: attr(data-title);
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    padding: 6px 10px;
    background: rgba(0, 0, 0, 0.5);
    color: #fff;
    font-size: 14px;
    opacity: 0;
    transition: opacity 0.2s;
    border-bottom-left-radius: 12px;
    border-bottom-right-radius: 12px;
  }

  #imageList button:hover::after {
    opacity: 1;
  }

</style>
</head>
<body>

  <div class="top-bar">
    <!-- Clickable logo -->
    <a href="https://10tothe6.github.io/duality">
      <img src="https://github.com/10tothe6/10tothe6.github.io/blob/main/img/duality_logo.png?raw=true" alt="Home Logo">
    </a>
    <h1>Firebase Login Example</h1>

  <!-- SIGNUP -->
  <h2>Sign Up</h2>
  <form id="signup-form">
    <input id="signup-email" type="email" placeholder="Email">
    <input id="signup-password" type="password" placeholder="Password">
    <button>Sign Up</button>
  </form>

  <!-- LOGIN -->
  <h2>Log In</h2>
  <form id="login-form">
    <input id="login-email" type="email" placeholder="Email">
    <input id="login-password" type="password" placeholder="Password">
    <button>Log In</button>
  </form>

  <button id="logout-btn" style="display:none">Log Out</button>

  <h3 id="status">Not logged in</h3>
    <!-- Optional: title -->
    <!-- <div class="title">My Website</div> -->
  </div>

  <!-- <h2>Available Articles</h2> -->
  <div id="container">
    <div id="bob">
      <img width="400" src="https://github.com/10tothe6/10tothe6.github.io/blob/main/img/duality_logo.png?raw=true" alt="Example Image">
    </div>
    <div id="imageList">Loadingâ€¦</div>
  </div>

  <script>
    const bob = document.getElementById('bob');
    let pos = 0;
    let direction = 1; // 1 = up, -1 = down
    const speed = 0.1; // pixels per frame

    function animate() {
      pos += direction * speed;
      if (pos > 20) direction = -1;
      if (pos < 0) direction = 1;
      bob.style.transform = `translate(-50%, calc(-50% - ${pos}px))`;
      requestAnimationFrame(animate);
    }

    animate();
  </script>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js";
    import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-firestore.js";
    import {
    getAuth,
    createUserWithEmailAndPassword,
    signInWithEmailAndPassword,
    signOut,
    onAuthStateChanged
  } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyArv-BB3H5pIZFZBANfFYFG1bBNxO0veeA",
      authDomain: "duality-articles.firebaseapp.com",
      projectId: "duality-articles",
      storageBucket: "duality-articles.firebasestorage.app",
      messagingSenderId: "497426954182",
      appId: "1:497426954182:web:8081f58e64d32048c3a4c7",
      measurementId: "G-TJ5TXZEQH5"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const imageListDiv = document.getElementById("imageList");

  const auth = getAuth(app);

// DOM
const statusText = document.getElementById("status");
const logoutBtn = document.getElementById("logout-btn");

//
// 3. SIGN UP
//
document.getElementById("signup-form").addEventListener("submit", (e) => {
  e.preventDefault();

  const email = document.getElementById("signup-email").value;
  const password = document.getElementById("signup-password").value;

  createUserWithEmailAndPassword(auth, email, password)
    .then((cred) => {
      console.log("User created:", cred.user.email);
    })
    .catch((err) => {
      alert(err.message);
    });
});

//
// 4. LOG IN
//
document.getElementById("login-form").addEventListener("submit", (e) => {
  e.preventDefault();

  const email = document.getElementById("login-email").value;
  const password = document.getElementById("login-password").value;

  signInWithEmailAndPassword(auth, email, password)
    .then((cred) => {
      console.log("Logged in:", cred.user.email);
    })
    .catch((err) => {
      alert(err.message);
    });
});

//
// 5. LOG OUT
//
logoutBtn.addEventListener("click", () => {
  auth.signOut();
});

//
// 6. a state changes
//
onAuthStateChanged(auth, (user) => {
  if (user) {
    statusText.textContent = "Logged in as: " + user.email;
    logoutBtn.style.display = "block";
  } else {
    statusText.textContent = "Not logged in";
    logoutBtn.style.display = "none";
  }
});

    async function loadImages() {
      try {
        const snapshot = await getDocs(collection(db, "thumbnails"));
        imageListDiv.innerHTML = "";

        snapshot.forEach(doc => {
          const data = doc.data();
          const button = document.createElement("button");
          button.setAttribute("data-title", data.title);
          const img = document.createElement("img");
          img.src = data.url;
          button.appendChild(img);
          button.addEventListener("click", () => {
            window.location.href = "https://10tothe6.github.io/duality/articles/" + data.domain;
          });
          imageListDiv.appendChild(button);
        });
      } catch (err) {
        imageListDiv.innerHTML = "Error loading images.";
        console.error(err);
      }
    }

    loadImages();
  </script>
</body>
</html>